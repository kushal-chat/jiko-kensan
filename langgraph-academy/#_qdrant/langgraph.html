<article class="documentation-article"><h1 id="langgraph"><a class="anchorjs-link text-decoration-none" aria-label="Anchor" data-anchorjs-icon="" href="#langgraph" style="font-style: normal; font-variant: normal; font-size-adjust: none; font-language-override: normal; font-kerning: auto; font-optical-sizing: auto; font-feature-settings: normal; font-variation-settings: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: inherit; font-family: anchorjs-icons; position: absolute; margin-left: -1.25em; padding-right: 0.25em; padding-left: 0.25em;"></a>LangGraph</h1><p><a href="https://github.com/langchain-ai/langgraph" target="_blank" rel="noopener nofollow">LangGraph</a> is a library for building stateful, multi-actor applications, ideal for creating agentic workflows. It provides fine-grained control over both the flow and state of your application, crucial for creating reliable agents.</p><p>You can define flows that involve cycles, essential for most agentic architectures, differentiating it from DAG-based solutions. Additionally, LangGraph includes built-in persistence, enabling advanced human-in-the-loop and memory features.</p><p>LangGraph works seamlessly with all the components of LangChain. This means we can utilize Qdrant’s <a href="https://qdrant.tech/documentation/frameworks/langchain/">Langchain integration</a> to create retrieval nodes in LangGraph, available in both Python and Javascript!</p><h2 id="usage"><a class="anchorjs-link text-decoration-none" aria-label="Anchor" data-anchorjs-icon="" href="#usage" style="font-style: normal; font-variant: normal; font-size-adjust: none; font-language-override: normal; font-kerning: auto; font-optical-sizing: auto; font-feature-settings: normal; font-variation-settings: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: inherit; font-family: anchorjs-icons; position: absolute; margin-left: -1.25em; padding-right: 0.25em; padding-left: 0.25em;"></a>Usage</h2><ul><li>Install the required dependencies</li></ul><div class="lang-tabs"><div class="lang-tabs__wrapper"><span class="lang-tabs__button lang-tabs__button_python active" data-lang="python"><i class="lang-tabs__icon lang-tabs__icon_python"></i><span class="lang-tabs__text">python</span></span><span class="lang-tabs__button lang-tabs__button_typescript" data-lang="typescript"><i class="lang-tabs__icon lang-tabs__icon_typescript"></i><span class="lang-tabs__text">typescript</span></span></div><div class="lang-tabs__overlay"></div></div><div class="highlight"><pre tabindex="0" class="chroma" id="MwOTY"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="err">$</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">langgraph</span> <span class="n">langchain_community</span> <span class="n">langchain_qdrant</span> <span class="n">fastembed</span>
</span></span></code></pre><button type="button" role="button" class="d-inline-block copy-code lead" id="copy-popover-MwOTY" data-clipboard-target="#MwOTY"><i role="tooltip" title="Copy to clipboard"></i></button></div><div class="highlight"><pre tabindex="0" class="chroma" id="E2NTM"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="nx">$</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="kd">@langchain</span><span class="o">/</span><span class="nx">langgraph</span> <span class="nx">langchain</span> <span class="kd">@langchain</span><span class="o">/</span><span class="nx">qdrant</span> <span class="kd">@langchain</span><span class="o">/</span><span class="nx">openai</span>
</span></span></code></pre><button type="button" role="button" class="d-inline-block copy-code lead" id="copy-popover-E2NTM" data-clipboard-target="#E2NTM"><i role="tooltip" title="Copy to clipboard"></i></button></div><ul><li>Create a retriever tool to add to the LangGraph workflow.</li></ul><div class="lang-tabs"><div class="lang-tabs__wrapper"><span class="lang-tabs__button lang-tabs__button_python active" data-lang="python"><i class="lang-tabs__icon lang-tabs__icon_python"></i><span class="lang-tabs__text">python</span></span><span class="lang-tabs__button lang-tabs__button_typescript" data-lang="typescript"><i class="lang-tabs__icon lang-tabs__icon_typescript"></i><span class="lang-tabs__text">typescript</span></span></div><div class="lang-tabs__overlay"></div></div><div class="highlight"><pre tabindex="0" class="chroma" id="M5ODg"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">langchain.tools.retriever</span> <span class="kn">import</span> <span class="n">create_retriever_tool</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">langchain_community.embeddings</span> <span class="kn">import</span> <span class="n">FastEmbedEmbeddings</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">langchain_qdrant</span> <span class="kn">import</span> <span class="n">FastEmbedSparse</span><span class="p">,</span> <span class="n">QdrantVectorStore</span><span class="p">,</span> <span class="n">RetrievalMode</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># We'll set up Qdrant to retrieve documents using Hybrid search.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Learn more at https://qdrant.tech/articles/hybrid-search/</span>
</span></span><span class="line"><span class="cl"><span class="n">retriever</span> <span class="o">=</span> <span class="n">QdrantVectorStore</span><span class="o">.</span><span class="n">from_texts</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">url</span><span class="o">=</span><span class="s2">"http://localhost:6333/"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">collection_name</span><span class="o">=</span><span class="s2">"langgraph-collection"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">embedding</span><span class="o">=</span><span class="n">FastEmbedEmbeddings</span><span class="p">(</span><span class="n">model_name</span><span class="o">=</span><span class="s2">"BAAI/bge-small-en-v1.5"</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">sparse_embedding</span><span class="o">=</span><span class="n">FastEmbedSparse</span><span class="p">(</span><span class="n">model_name</span><span class="o">=</span><span class="s2">"Qdrant/bm25"</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">retrieval_mode</span><span class="o">=</span><span class="n">RetrievalMode</span><span class="o">.</span><span class="n">HYBRID</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">texts</span><span class="o">=</span><span class="p">[</span><span class="s2">"&lt;SOME_KNOWLEDGE_TEXT&gt;"</span><span class="p">,</span> <span class="s2">"&lt;SOME_OTHER_TEXT&gt;"</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span><span class="o">.</span><span class="n">as_retriever</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">retriever_tool</span> <span class="o">=</span> <span class="n">create_retriever_tool</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">retriever</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">"retrieve_my_texts"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">"Retrieve texts stored in the Qdrant collection"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre><button type="button" role="button" class="d-inline-block copy-code lead" id="copy-popover-M5ODg" data-clipboard-target="#M5ODg"><i role="tooltip" title="Copy to clipboard"></i></button></div><div class="highlight"><pre tabindex="0" class="chroma" id="cyNDg"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">QdrantVectorStore</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">"@langchain/qdrant"</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">OpenAIEmbeddings</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">"@langchain/openai"</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">createRetrieverTool</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">"langchain/tools/retriever"</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">vectorStore</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">QdrantVectorStore</span><span class="p">.</span><span class="nx">fromTexts</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span><span class="s2">"&lt;SOME_KNOWLEDGE_TEXT&gt;"</span><span class="p">,</span> <span class="s2">"&lt;SOME_OTHER_TEXT&gt;"</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">[{</span> <span class="nx">id</span>: <span class="kt">2</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">id</span>: <span class="kt">1</span> <span class="p">}],</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">OpenAIEmbeddings</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">url</span><span class="o">:</span> <span class="s2">"http://localhost:6333/"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">collectionName</span><span class="o">:</span> <span class="s2">"goldel_escher_bach"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">retriever</span> <span class="o">=</span> <span class="nx">vectorStore</span><span class="p">.</span><span class="nx">asRetriever</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">tool</span> <span class="o">=</span> <span class="nx">createRetrieverTool</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">retriever</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="o">:</span> <span class="s2">"retrieve_my_texts"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">description</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">      <span class="s2">"Retrieve texts stored in the Qdrant collection"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span></code></pre><button type="button" role="button" class="d-inline-block copy-code lead" id="copy-popover-cyNDg" data-clipboard-target="#cyNDg"><i role="tooltip" title="Copy to clipboard"></i></button></div><ul><li>Add the retriever tool as a node in LangGraph</li></ul><div class="lang-tabs"><div class="lang-tabs__wrapper"><span class="lang-tabs__button lang-tabs__button_python active" data-lang="python"><i class="lang-tabs__icon lang-tabs__icon_python"></i><span class="lang-tabs__text">python</span></span><span class="lang-tabs__button lang-tabs__button_typescript" data-lang="typescript"><i class="lang-tabs__icon lang-tabs__icon_typescript"></i><span class="lang-tabs__text">typescript</span></span></div><div class="lang-tabs__overlay"></div></div><div class="highlight"><pre tabindex="0" class="chroma" id="A5OTE"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">langgraph.graph</span> <span class="kn">import</span> <span class="n">StateGraph</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">langgraph.prebuilt</span> <span class="kn">import</span> <span class="n">ToolNode</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">workflow</span> <span class="o">=</span> <span class="n">StateGraph</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Define other the nodes which we'll cycle between.</span>
</span></span><span class="line"><span class="cl"><span class="n">workflow</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"retrieve_qdrant"</span><span class="p">,</span> <span class="n">ToolNode</span><span class="p">([</span><span class="n">retriever_tool</span><span class="p">]))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">graph</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
</span></span></code></pre><button type="button" role="button" class="d-inline-block copy-code lead" id="copy-popover-A5OTE" data-clipboard-target="#A5OTE"><i role="tooltip" title="Copy to clipboard"></i></button></div><div class="highlight"><pre tabindex="0" class="chroma" id="k3MzY"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">StateGraph</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">"@langchain/langgraph"</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">ToolNode</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">"@langchain/langgraph/prebuilt"</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Define the graph
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">workflow</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">StateGraph</span><span class="p">(</span><span class="nx">SomeGraphState</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Define the nodes which we'll cycle between.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">.</span><span class="nx">addNode</span><span class="p">(</span><span class="s2">"retrieve"</span><span class="p">,</span> <span class="k">new</span> <span class="nx">ToolNode</span><span class="p">([</span><span class="nx">tool</span><span class="p">]));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">graph</span> <span class="o">=</span> <span class="nx">workflow</span><span class="p">.</span><span class="nx">compile</span><span class="p">();</span>
</span></span></code></pre><button type="button" role="button" class="d-inline-block copy-code lead" id="copy-popover-k3MzY" data-clipboard-target="#k3MzY"><i role="tooltip" title="Copy to clipboard"></i></button></div><h2 id="further-reading"><a class="anchorjs-link text-decoration-none" aria-label="Anchor" data-anchorjs-icon="" href="#further-reading" style="font-style: normal; font-variant: normal; font-size-adjust: none; font-language-override: normal; font-kerning: auto; font-optical-sizing: auto; font-feature-settings: normal; font-variation-settings: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: inherit; font-family: anchorjs-icons; position: absolute; margin-left: -1.25em; padding-right: 0.25em; padding-left: 0.25em;"></a>Further Reading</h2><ul><li><a href="https://langchain-ai.github.io/langgraph/" target="_blank" rel="noopener nofollow">LangGraph Documentation</a></li><li><a href="https://langchain-ai.github.io/langgraph/tutorials/get-started/1-build-basic-chatbot/" target="_blank" rel="noopener nofollow">LangGraph Tutorial build basic chatbot</a></li></ul></article>